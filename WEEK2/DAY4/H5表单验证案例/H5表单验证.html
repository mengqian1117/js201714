<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>用户注册表单页</title>
    <style>
        #form_content {
            width: 660px;
            margin: 0 auto;
            position: relative;
            border: 1px dashed #c9c9c9;
        }

        #form_content .dc {
            width: 660px;
            margin-top: 10px;
            overflow: hidden;
        }

        #form_content .dc h3 {
            text-align: center;
            font-size: 30px;
            color: #2b7dd1;
        }

        #form_content b {
            display: inline-block;
            height: 40px;
            line-height: 40px;
            margin-left: 20px;
            font-size: 20px;
            color: #807c7f;
        }

        #form_content input {
            display: inline-block;
            height: 34px;
            width: 200px;
            border-radius: 2px;
            margin-left: 60px;
            padding-left: 10px;
        }

        .pc {
            width: 200px;
            height: 40px;
            float: right;
            line-height: 40px;
            text-align: center;
            margin: 0 20px 0;
            background: #333;
            color: #fff;
            font-weight: bold;
            border-radius: 8px;
            display: none;
        }

        input#sub {
            display: block;
            width: 215px;
            background: #8187ff;
            margin: 20px auto;
            border-radius: 5px;
            font-size: 20px;
            color: #fff;
            padding: 5px 0;
            height: 40px;
            font-weight: bold;
        }

        .show_pass {
            background: limegreen;
            display: block;
        }

        .show_warn {
            background: #e4393c;
            display: inline-block;
        }

        #audio_bground {
            width: 100%;
            height: 100%;
            background: #afa;
            position: absolute;
            z-index: -10;
        }
    </style>
</head>
<body>
<!--
autocomplete="on" 记录之前输入的内容
autofocus:自动获取焦点
required:必填的
pattern="":正则进行校验
novalidate:不做校验  给form加
-->
<div id="form_content">
    <form action="获取提交数据.html" autocomplete="on">
        <div class="dc">
            <h3>用户注册页面</h3>
        </div>
        <div class="dc">
            <b>用户昵称</b>
            <input type="text" id="user" name="user" required autofocus pattern="^[a-zA-Z]\w{5,14}$"/>
            <p class="pc">请输入用户名</p>
        </div>
        <div class="dc">
            <b>用户密码</b>
            <input type="password" required id="pw" name="pw"/>
            <p class="pc">请输入密码</p>
        </div>
        <div class="dc">
            <b>个人邮箱</b>
            <input type="email" id="email" name="email" required/>
            <p class="pc">请输入邮箱</p>
        </div>
        <div class="dc">
            <b>个人主页</b>
            <input type="url" id="url" name="url"/>
            <p class="pc">请输入个人主页(可不填)</p>
        </div>
        <div class="dc">
            <b>联系电话</b>
            <input type="tel" id="tel" name="tel"/>
            <p class="pc">请输入联系电话</p>
        </div>
        <div class="dc">
            <b>你的年龄</b>
            <input type="number" min="12" max="65" id="age" name="age"/>
            <p class="pc">请输入你的年龄</p>
        </div>
        <div class="dc">
            <b>出生日期</b>
            <input type="date" id="date" name="date"/>
            <p class="pc">请选择出生日期</p>
        </div>
        <div class="dc">
            <input id="sub" type="submit" value="提交注册"/>
        </div>
    </form>
</div>
<script>
    //注意每一个input的name属性必须加上,只有加上了才会序列化到url上
    let inputList=document.getElementById("form_content").getElementsByTagName("input");
    //输入框获取焦点,显示提示用语
    //获取焦点事件:onfocus
    //注意:最后一个提交按钮不需要绑定焦点事件
//    for(let i=0;i<inputList.length-1;i++){
//        inputList[i].onfocus=function () {
//            //谁获取焦点就让谁的弟弟(提示用语)显示
//            this.nextElementSibling.style.display="block";
//            //判断当前这个input有没有哥哥,如果有哥哥那就做校验
//            //this.validity.valid:true 此时输入框中的内容没有问题,通过校验
//            if(i!=0){//只要索引不是0都会有哥哥,哥哥的索引i-1
//                if(inputList[i-1].validity.valid){
//                    //inputList[i-1].validity.valid=true,说明输入框的内容校验成功
//                    inputList[i-1].nextElementSibling.className="pc show_pass";
//                    //让提示框的内容变成√
//                    inputList[i-1].nextElementSibling.innerHTML="√";
//                }else {
//                    //校验不成功
//                    inputList[i-1].nextElementSibling.className="pc show_warn";
//                    inputList[i-1].nextElementSibling.innerHTML="输入的内容不合法";
//                }
//            }
//        }
//    }

    //失去焦点onblur
    //获取焦点显示提示用语,失去焦点做校验
    for(let i=0;i<inputList.length-1;i++){
        inputList[i].onfocus=function () {
            this.nextElementSibling.style.display="block";
        };
        inputList[i].onblur=function () {
            if(this.validity.valid){
                this.nextElementSibling.className="pc show_pass";
                this.nextElementSibling.innerHTML="√";
            }else {
                this.nextElementSibling.className="pc show_warn";
                this.nextElementSibling.innerHTML="×";
            }
        }
    }

    //user.setCustomValidity("傻呀");
</script>
</body>
</html>